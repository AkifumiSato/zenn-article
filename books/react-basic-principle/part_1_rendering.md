---
title: "レンダリングと宣言的UI"
---

## 要約

Reactでは、状態の更新に応じてコンポーネントを**再レンダリング**することで、複雑化しやすいUIの更新処理を自動化しています。これにより、開発者はUIを**宣言的**に記述することができます。

## 背景

Webアプリケーションの台頭により、近年のフロントエンド開発に対する要求は急速に複雑化しました。React登場以前、多くの開発者は様々な観点を考慮しつつ、UI更新処理を実装していました。

- 更新前のUI: DOMがどういう状態にあるか
- JavaScript管理の状態: JavaScript変数など
- イベント: クリックや入力など
- 更新後のUI: DOMをどういう状態にすべきか

これらを統合するUI更新処理は**命令的**になりやすく、命令的な実装は複雑になりがちなため、多くの企業がWebアプリケーションの開発に苦労していました。

## 設計・プラクティス

Reactは、命令的な実装による複雑性を解決するために開発されました^[参考: [宣言型 UI と命令型 UI の比較](https://ja.react.dev/learn/reacting-to-input-with-state#how-declarative-ui-compares-to-imperative)]。

具体的には、Reactにおける「更新後のUI」は`UI = f(state)`のように関数と状態で表現されます。`f()`はUIを表現する関数で、`state`は文字通り状態です。状態の更新に応じて`f(state)`を再実行し反映すれば、「更新後のUI」を実現できます。

このように、状態の更新に応じて`f(state)`を再実行することをReactでは**再レンダリング**と呼びます。また、`UI = f(state)`のように欲しい結果を書くようなプログラミングスタイルは宣言的プログラミングと呼ばれるため、Reactのアプローチは**宣言的UI**と呼ばれています。

### 再レンダリングの大まかな仕組み

TBW

- 再レンダリングは`useState()`から返される「現在の状態」を更新するAPIによってトリガーされる
- Reactは「更新前のUI」と「更新後のUI」の差分から更新内容を算出し、適用する
- そのため、更新が実行されるのは差分があった場合のみ

:::message
これらはレンダーとコミットと呼ばれる処理です。より詳細な内容を知りたい方は[公式ドキュメントの解説](https://ja.react.dev/learn/render-and-commit)をご参照ください。
:::

### 宣言的UIの純粋性

TBW

- 上記の仕組みは、ReactにおけるUI実装が純粋であることが前提
- このように、Reactは関数型プログラミングのアイディアをさまざま取り入れている

## トレードオフ

TBW

- 再レンダリングする範囲が広いとパフォーマンスがトレードオフになりうるため、Reactは様々な最適化手段を提供している
  - コンポーネント単位でのレンダリング
  - メモ化や並行レンダリングなど
