---
title: "「読み込みが遅い」と感じさせないローディングのUX"
emoji: "⚡️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["performance", "ui"]
published: false
---

ユーザーにとってのパフォーマンスとは、特定の指標に基づいて判断されるような定量的なものではなく、アプリケーションの総合的な体験を通じて感じる定性的なものです。そのため、ユーザーがアプリケーションを「遅い」と感じる要因は様々です。

Googleは以前より、[ユーザー中心のパフォーマンス](https://web.dev/articles/user-centric-performance-metrics?hl=ja)を提唱しています。[Core Web Vitals](https://developers.google.com/search/docs/appearance/core-web-vitals?hl=ja)はユーザーが感じるパフォーマンスを定量的に計測するために作成された測定指標で、現在最も重要なパフォーマンス指標の1つです。一方、Core Web Vitalsはパフォーマンスに関するUX全てを計測するものではありません。Core Web Vitalsを改善することは重要ですが、最終的にはUX全体を最適化する必要があります。

本稿では、ページ読み込み時に遅いと感じさせないためのローディングのUXについて解説します。

## 要約

1. [早期レイアウト表示](#1-早期レイアウト表示)
2. [段階的なUI表示](#2-段階的なUI表示)
3. [ローダーやスケルトンは遅い時のみ](#3-ローダーやスケルトンは遅い時のみ)
4. [fade inアニメーション](#4-fade-inアニメーション)

## 解説

:::message
本稿はページ読み込み時のユーザー体験について解説するものであり、これらの技術的な実現方法については対象外とします。
:::

### 1. 早期レイアウト表示

Webアプリケーションでは、ユーザーの操作に対しできるだけ早くフィードバックを返すことが望ましいとされています。これはページ読み込み時においても同様で、表示可能な部分から徐々に表示されるような体験が望ましいと考えられます。具体的には、ページの表示を段階的に分割し、**レイアウトをできるだけ早く表示**することで、ユーザーに対する無応答時間を減らすことができます。

レイアウトは静的もしくはキャッシュ可能データを中心に構成することで、応答時間を短縮することができます。

#### 例

以下は、早期にレイアウトを表示し、遅れて記事一覧が表示される様子です。

![レイアウト表示](/images/ux-tips-avoid-slowness/layout.png)

#### 注意点

ページ読み込み中のレイアウト変更は、ユーザーに不快感を与えます。これはCore Web Vitalsにおける[Cumulative Layout Shift（CLS）](https://web.dev/articles/cls?hl=ja)という指標で計測することができるので、[Light House](https://developer.chrome.com/docs/lighthouse/overview?hl=ja)などを利用してCLSを最小化することを心がけましょう。

#### 補足: SEOとJavaScript

早期レイアウト表示のようにページの表示を段階的にするには、JavaScriptによる処理が必要になります。JavaScriptが必要というと、SEOに影響するのではと懸念される方もいるでしょう。

JavaScriptを必要とするコンテンツとSEOの関係については、以前は様々な影響があることが示唆されていましたが、2024年のVercelの調査によると、昨今では影響が限定的になっていることが判明しています。

詳細な内容は以下の記事をご参照ください。とても興味深い結果が記載されています。

https://vercel.com/blog/how-google-handles-javascript-throughout-the-indexing-process

### 2. 段階的なUI表示

レイアウトに限らず、徐々にUIが構築されていくような体験はユーザーに対する適切なフィードバックとなるため、望ましい体験です。**段階的にUIが表示**されるよう設計しましょう。

#### 例

以下は、記事一覧とログイン状態を表すユーザーのアバターが並行して読み込まれ、徐々に表示される様子です。アバターが少し遅れて表示されています。

![段階的なUI表示](/images/ux-tips-avoid-slowness/concurrent-load.png)

#### 注意点

UX上並行の読み込んでるように見えるだけでなく、実際に**データ取得が並行になるよう実装する必要がある**ことに注意しましょう。

### 3. ローダーやスケルトンは遅い時のみ

**読み込みが遅い時**には、ローダーやスケルトンを使ってユーザーに対し「読み込みに時間がかかっています」ということを伝えましょう。

#### 例

以下は、記事の読み込みに時間がかかっている際に、スケルトンを表示する様子です。記事カセットの高さが自明な場合、スケルトンでも同様の高さにすることで、レイアウトシフトを防ぐことができます。

![ローダーやスケルトンは遅い時のみ](/images/ux-tips-avoid-slowness/skeleton.png)

#### 注意点

ローダーやスケルトンは読み込みが速い時に表示すると、画面がチラついて見えてしまいます。そのため、筆者は読み込み速度に応じて以下のような判断軸でこれらを使用しています。

| 要素の表示速度             | ローダー・スケルトンの要否 |
| :------------------------- | :------------------------- |
| **安定して速い**           | 不要                       |
| **安定して遅い**           | 必要                       |
| **不安定（遅い時がある）** | 遅い時だけ出す             |

速い/遅いの判断は主観ですが、表示に1秒近くかかるあたりから筆者は「遅い」と判断しています。

### 4. fade inアニメーション

遅れて表示されるコンテンツには、**fade inアニメーション**を適用しましょう。fade inアニメーションは、段階的なUI表示で発生するちらつきを抑え、ユーザーの違和感を軽減します。

#### 例

以下は記事一覧が読み込まれる時に、fade inアニメーションする様子です。

![fade inアニメーション](/images/ux-tips-avoid-slowness/fade-in-animation.gif =300x)

この例では記事一覧の読み込みが安定して高速であるため、スケルトンは表示されません。

## まとめ

パフォーマンスはユーザーにとって当たり前の品質であり、損なえばユーザーに不快感を与えます。そしてパフォーマンスチューニングは、開発者たちが当事者意識を持って改善に臨まなければ、なかなか改善しません。

Core Web Vitalsなど、定量化された指標でパフォーマンスを計測し、改善することは非常に重要です。同様に、UXの工夫でローディングを遅いと感じさせないことも重要です。

本稿が、パフォーマンス改善の観点を広く持つきっかけになれば幸いです。
