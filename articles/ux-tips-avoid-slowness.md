---
title: "遅いと感じさせないUXのテクニック"
emoji: "⚡️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["performance", "ui"]
published: false
---

ユーザーにとってのパフォーマンスとは、特定の指標に基づいて判断されるような定量的なものではなく、アプリケーションの総合的な体験を通じて感じる定性的なものです。そのため、ユーザーがアプリケーションを「遅い」と感じる要因は様々です。

Googleは以前より[ユーザー中心のパフォーマンス](https://web.dev/articles/user-centric-performance-metrics?hl=ja)を提唱しており、[Core Web Vitals](https://developers.google.com/search/docs/appearance/core-web-vitals?hl=ja)はユーザーが感じるパフォーマンスを定量的に計測するために作成された測定指標で、現在最も重要なパフォーマンス指標の1つです。一方、Core Web Vitalsはパフォーマンスに関するUX全てを計測するものではありません。これらの計測値を改善することは重要ですが、最終的にはUX全体を最適化する必要があります。

本稿では、筆者がユーザーに遅いと感じさせないために利用している、UXのテクニックについて解説します。

## 要約

1. [早期レイアウト表示](#1-早期レイアウト表示)
2. [表示が遅いコンテンツを分離](#2-表示が遅いコンテンツを分離)
3. [ローダーやスケルトンは遅い時のみ](#3-ローダーやスケルトンは遅い時のみ)
4. [fade inアニメーションを入れる](#4-fade-inアニメーションを入れる)

## 前提

パフォーマンス改善における最も基本となる作業は**計測**です。計測結果からパフォーマンスボトルネックを発見し、改善することが重要です。

## 解説

計測できないようなUXもユーザーに「遅い」と感じさせる要因になります。本稿では特に初期表示時のUXについて、筆者がよく利用するテクニックを4つ紹介します。

### 1. 早期レイアウト表示

**レイアウトはできるだけ早く表示しましょう**。レイアウトを早期に表示する仕組みは使ってるフレームワークの制約などの影響を受けやすいですが、可能な限り実現すべきです。

ただし、ページ読み込み中にレイアウトが変更されることはユーザーに不快感を与えます。これはCore Web Vitalsにおける[Cumulative Layout Shift（CLS）](https://web.dev/articles/cls?hl=ja)という指標で、実際に計測可能です。

具体的には、ヘッダーやサイドナゲーションなどは、ログインアイコンなどを除けば早期に表示することが可能なことが多いでしょう。以下はページのヘッダーのみ早期に表示され、メインのコンテンツが遅れて表示される例です。

![レイアウト表示](/images/ux-tips-avoid-slowness/layout.png)

### 2. 表示が遅いコンテンツを分離

1. レイアウトを早く出すということは、メインのコンテンツは遅延して表示することになる
2. メインコンテンツ全体が高速なら問題はないが、どこか表示に時間のかかる要素があるなら、さらに部分的な表示を遅延させる
3. たとえば、Zennのコメント欄やヘッダーのログインアイコンは、ページの読み込みとは分離されてる
4. この際、ヘッダーなどの要素はレイアウトシフトしないように設計することも重要
5. ただし、表示が段階的になるほど画面がうるさく感じてくる
6. これは一部でポップコーンUIと称される、アンチパターンである

### 3. ローダーやスケルトンは遅い時のみ

- ローダーやスケルトンは、読み込みが遅い時にユーザーに対し「読み込みに時間がかかっています」ということを伝えるインターフェース
- 読み込みが多くない時に表示すると、画面がチラついて見えるだけ
- 要素の表示速度が安定して高速なら、ローダーやスケルトンは不要
- 要素の表示速度が安定して低速なら、ローダーやスケルトンは必要
- 要素の表示速度が不安定なら、ローダーやスケルトンを遅い時だけ出す

### 4. fade inアニメーションを入れる

- 遅れて表示されるコンテンツには、fade inアニメーションが適切である
- あまり言語化できてないが、個人的にはfade inにするだけでかなり自然に感じるのである
- アプリケーションによっては、slide inでも良いと思う

## まとめ

- Core Web Vitalsなど、定量化された指標でパフォーマンスを計測し、改善することは非常に重要
- 同じくらい、UXにおける工夫もとても重要
- この記事が参考になれば幸いです
