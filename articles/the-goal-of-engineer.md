---
title: "エンジニアのためのTHE GOAL - 制約理論による開発価値の最大化"
emoji: "🏃"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["制約理論", "TOC", "プロダクト開発"]
published: false
---

**制約理論**や**TOC**という単語を聞いたことはありますか？僕のキャリア大半はプロダクト開発に従事しており、その中で「これエンジニアの仕事なのだろうか」「これ実装する意味あるんだろうか」「求められることとやるべきだと思うことが異なる」など、よくある（？）悩みに直面したことがあります。スクラム開発やリーン開発を意識したかんばん方式などを経験し、ものづくりのプラクティスが少しずつ見えてきてこの制約理論によってより原則に近い部分が言語化・理解できた気がしています。現在では制約理論は僕のプロダクト開発における価値観の根幹に位置する重要な思想であり、もっと多くのエンジニアに知ってほしいと思っている理論です。

## 会社にとってのTHE GOAL

制約理論は[THE GOAL](https://promo.diamond.jp/books/the-goal/)という本で提唱された理論です。制約理論とは何かを解説する前に、まず会社の目的(=THE GOAL)について考えてみます。「商品を売ること」「社会に貢献すること」など、人によって答えは様々かもしれませんが、制約理論においてはキャッシュフロー、つまりお金を儲けることを目的と置いています。

これだけを目的に置くとそのために何をしてもいいのかという話になってしまうので、僕なりに再定義すると「ユーザーに価値を提供し、お金を儲けること」こそが会社の目的であるしましょう。

## 価値とは何か

では価値とは何なのか、もう少し細分化してみましょう。ここでは価値をユーザーにとっての品質観点から分析する、[狩野モデル](https://ja.wikipedia.org/wiki/%E7%8B%A9%E9%87%8E%E3%83%A2%E3%83%87%E3%83%AB)を参考に考えてみます。

狩野モデルでは品質をいくつかに分類しますが、ここでは代表的な以下の3つに絞って考えてみます。

- **魅力品質**: 高いと満足になるが、低くても不満足にはならない。検索サイトのレコメンド機能など。
- **一次元的品質**: 高いと満足になり、低いと不満足になる。ストレージにおける容量など。
- **当たり前品質**: 高くても満足にはならないが、低いと不満足になる。サイトパフォーマンスなど。

![](/images/the-goal-of-engineer/kano.png)

ユーザーが価値を感じるには上記品質のどれかを満たすのではなく、全てにおいてバランス良く品質を提供する必要があります。

狩野モデルの分類はユーザーにとっての品質であり、いわゆる**外部品質**の分類です。一方で運営側である会社や開発チームにとっての品質、例えば保守性などの品質は**内部品質**と呼ばれます。外部品質は内部品質によって支えられています。内部品質はスピードのトレードオフとして交渉されることがありますが、それは成り立たずただ崩壊へ近づくことはt-wadaさんの[質とスピード](https://speakerdeck.com/twada/quality-and-speed-2022-spring-edition)を読むとよくわかります。

https://speakerdeck.com/twada/quality-and-speed-2022-spring-edition?slide=28

ここまでをまとめると価値とは、外部品質に分類することができ、外部品質は内部品質によって支えられているということになります。

## エンジニアリングのKPI

TBW

## 制約理論

制約理論は「どんなシステムであれ、常に、ごく少数（たぶん唯一）の要素または因子によって、そのパフォーマンスが制限されている」（[参考:TOC協会](https://japan-toc-association.org/basic_concept/)）という仮定の元提唱された経営理論です。

## 構成

- エンジニアリングのKPI
  - エンジニアリングはゴールに対するKPIである「高い品質を迅速に提供する」ことが最大目標
    - キャッシュフローが最大目標ではあるが、そこに対してエンジニアができるのは↑
    - 迅速に提供するために、内部品質とスピードのトレードオフがよくあるがこれは成り立たない
    - では何を工夫すればいいのか？
    - 価値を最大化するために、取り組むべきポイントを探す必要がある
    - ここで制約理論が出てくる
      - アウトプットはボトルネックによってのみ決定される
      - つまりボトルネックを見つけ、最適化することが唯一の改善方法
- 制約理論
  - 「どんなシステムであれ、常に、ごく少数（たぶん唯一）の要素または因子によって、そのパフォーマンスが制限されている」
    - https://japan-toc-association.org/basic_concept/
  - 価値の創出のボトルネックを探す
    - 優先度順がおかしいとそれだけでゴールが遠ざかる＝優先度の徹底が必要
  - ボトルネックを最適化すると価値創出が増加
  - ボトルネックに合わせて全体を最適化すること≒制約理論
- ボトルネックは悪なのか
  - ボトルネックはネガティヴなイメージ
  - クリティカルパスって言うと？
  - 結論悪じゃない、むしろ最も大事なところな可能性すらある
  - ボトルネックタスクを急かすと品質が悪化してよりボトルネック依存が強まる
  - とはいえ、ダイエットできる場合もある
- 開発のボトルネックの多くは開発前にある
  - 当然、開発フロー自体にボトルネックがあることもある
  - が、そもそも優先度が低いものが計画に入ってたり、逆に優先度が高いはずのものがないことは多々ある
  - 仕様調整は勇気がいる、そして大変
  - だがこれをガチると効果抜群なことがある
  - どんなに優秀な人が計画してても、実装するまでわからないことは絶対ある
  - エンジニアも仕様調整するのが、結果ボトルネックの最適化に繋がることがあるのだ
- 開発中のボトルネックになりやすい品質問題
  - 開発中ボトルネックと化しやすいのは品質である
  - 急かされるスケジュールに品質に目を瞑り、結果バグ対応で後半パンクした経験はあるかい？
  - 今やっておかないと辛いけどやる時間がないって思ったものは、大抵今やったほうがいい
  - 問題の先延ばしは目の前のスケジュールしか解決しない
- まとめ
    - 会社は売り上げが大事で、売り上げは価値創出から生まれる
    - 僕らは価値創出をするのが仕事
    - ボトルネックに合わせて全体を最適化すると価値創出が高まる(制約理論)
    - 価値創出が目的なので、品質軽視な最適化は絶対に避けよう~~
