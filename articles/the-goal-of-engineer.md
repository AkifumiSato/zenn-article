---
title: "エンジニアのためのTHE GOAL - 制約理論のすゝめ"
emoji: "🏃"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["制約理論", "TOC", "プロダクト開発"]
published: false
---

**制約理論**や**TOC**という単語を聞いたことはありますか？僕のキャリア大半はプロダクト開発に従事しており、その中で「これエンジニアの仕事なのだろうか」「これ実装する意味あるんだろうか」「求められることとやるべきだと思うことが異なる」など、よくある（？）悩みに直面したことがあります。スクラム開発やかんばん方式などを経験しものづくりのプラクティスが少しずつ見えてきて、この制約理論によってより原則に近い部分が言語化・理解できた気がしています。現在では制約理論は僕のプロダクト開発における価値観そのものであり、もっと多くのエンジニアに知ってほしいと思っている理論です。

## 制約理論とは…の前に

制約理論は[THE GOAL](https://promo.diamond.jp/books/the-goal/)という本で提唱された理論です。制約理論とは何かを解説する前に、まず会社の目的(=THE GOAL)について考えてみます。「商品を売ること」「社会に貢献すること」など、人によって答えは様々かもしれませんが、制約理論においてはキャッシュフロー、つまりお金を儲けることを目的と置いています。

これだけを目的に置くとそのために何をしてもいいのかという話になってしまうので、僕なりに再定義すると「ユーザーに価値を提供し、お金を儲けること」こそが会社の目的であるしましょう。

### 価値とは何か

では価値とは何なのか、もう少し細分化してみましょう。ここでは価値を品質という観点から分析する、[狩野モデル](https://ja.wikipedia.org/wiki/%E7%8B%A9%E9%87%8E%E3%83%A2%E3%83%87%E3%83%AB)を参考に考えてみます。

狩野モデルでは品質をいくつかに分類しますが、ここでは代表的な以下の3つに絞って考えてみます。

- **魅力品質**: 高いと満足になるが、低くても不満足にはならない。検索サイトのレコメンド機能など。
- **一次元的品質**: 高いと満足になり、低いと不満足になる。ストレージにおける容量など。
- **当たり前品質**: 高くても満足にはならないが、低いと不満足になる。サイトパフォーマンスなど。

![](/images/the-goal-of-engineer/kano.png)

ユーザーが価値を感じるには上記品質のどれかを満たすのではなく、全てにおいてバランス良く品質を提供する必要があります。

### 価値を作り込むには

もちろん、全ての品質を高く提供できるならそれに越したことはありませんが、現実にはスケジュールというものが伴います。発売日が決まってた欲しいゲームが何度も発売延期してたら、多くの人は不満に思うはずです。

そして遅れたスケジュールの中では、品質が犠牲にされることが多々あります。狩野モデルはユーザーにとっての品質定義ですが、ユーザーと作り手に焦点を当てたより広義な品質分類の**外部品質と内部品質**という考え方があります。遅れてるスケジュールにおいてはこの内部品質をトレードオフにされることが多々あります。ただし、**品質をトレードオフにスピードがあがることはありません**。品質の犠牲は単に問題を先送りし後で余計に遅れを発生させてしまうことの方が多いです。これはt-wadaさんの[質とスピード](https://speakerdeck.com/twada/quality-and-speed-2022-spring-edition?slide=39)

では限られた時間の中で品質をトレードオフにできないなら、どうすればいいでしょうか？ここからが制約理論の出番になります。

## 制約理論



## 構成

- 制約理論
  - 「どんなシステムであれ、常に、ごく少数（たぶん唯一）の要素または因子によって、そのパフォーマンスが制限されている」
    - https://japan-toc-association.org/basic_concept/
  - 価値の創出のボトルネックを探す
    - 優先度順がおかしいとそれだけでゴールが遠ざかる＝優先度の徹底が必要
  - ボトルネックを最適化すると価値創出が増加
  - ボトルネックに合わせて全体を最適化すること≒制約理論
- ボトルネックは悪なのか
  - ボトルネックはネガティヴなイメージ
  - クリティカルパスって言うと？
  - 結論悪じゃない、むしろ最も大事なところな可能性すらある
  - ボトルネックタスクを急かすと品質が悪化してよりボトルネック依存が強まる
  - とはいえ、ダイエットできる場合もある
- 開発のボトルネックの多くは開発前にある
  - 当然、開発フロー自体にボトルネックがあることもある
  - が、そもそも優先度が低いものが計画に入ってたり、逆に優先度が高いはずのものがないことは多々ある
  - 仕様調整は勇気がいる、そして大変
  - だがこれをガチると効果抜群なことがある
  - どんなに優秀な人が計画してても、実装するまでわからないことは絶対ある
  - エンジニアも仕様調整するのが、結果ボトルネックの最適化に繋がることがあるのだ
- 開発中のボトルネックになりやすい品質問題
  - 開発中ボトルネックと化しやすいのは品質である
  - 急かされるスケジュールに品質に目を瞑り、結果バグ対応で後半パンクした経験はあるかい？
  - 今やっておかないと辛いけどやる時間がないって思ったものは、大抵今やったほうがいい
  - 問題の先延ばしは目の前のスケジュールしか解決しない
- まとめ
    - 会社は売り上げが大事で、売り上げは価値創出から生まれる
    - 僕らは価値創出をするのが仕事
    - ボトルネックに合わせて全体を最適化すると価値創出が高まる(制約理論)
    - 価値創出が目的なので、品質軽視な最適化は絶対に避けよう~~
